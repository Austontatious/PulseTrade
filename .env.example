# --- Core ---
PROJECT_NAME=PulseTrade
PYTHONUNBUFFERED=1

# --- Database ---
POSTGRES_USER=pulse
POSTGRES_PASSWORD=pulsepass
POSTGRES_DB=pulse
POSTGRES_HOST=db
POSTGRES_PORT=5432
DATABASE_URL=postgresql://pulse:pulsepass@db:5432/pulse

# --- Redis/Celery ---
REDIS_URL=redis://redis:6379/0

# --- External APIs (optional but supported) ---
# Alpaca (Data API v2 or Market Data websocket)
ALPACA_API_KEY_ID=your_key
ALPACA_API_SECRET_KEY=your_secret
# Alpaca Market Data websockets (both can run concurrently)
ENABLE_ALPACA_IEX_WS=1
ENABLE_ALPACA_SIP_WS=1

# Finnhub / FMP (analyst ratings & estimates)
FINNHUB_API_KEY=your_key
FMP_API_KEY=your_key

# Stocktwits (REST) - public endpoints are rate-limited, many require auth
STOCKTWITS_TOKEN=your_token

# Truth Social (no stable public API - use your scraper or actor token)
TRUTH_SOCIAL_COOKIE=your_cookie_or_token

# Quiver / CapitolTrades (political trades)
QUIVER_API_KEY=your_key
CAPITOLTRADES_BASE=https://www.capitoltrades.com

# --- Feature flags ---
ENABLE_COINBASE=1
ENABLE_KRAKEN=1
ENABLE_ALPACA=0
ENABLE_FINNHUB=0
ENABLE_FMP=0
ENABLE_FMP_SCREENS=1
ENABLE_STOCKTWITS_TRENDING=1
ENABLE_STOCKTWITS=0
ENABLE_TRUTHSOCIAL=0
ENABLE_POLITICS=0
ENABLE_SENTIMENT_SCORING=1

SYMBOLS=AAPL,MSFT,BTCUSD,ETHUSD
# Optional explicit forecast universe (defaults to SYMBOLS)
FORECAST_TICKERS=
FORECAST_MAX_TICKERS=50
HTTP_POLL_SECS=120
TRUTH_SOCIAL_SCRAPER_URL=
USE_TIMESFM=0
USE_CHRONOS=0
ALPACA_SYMBOLS=AAPL,MSFT,SPY
ENABLE_ALPACA_EXECUTOR=0
ALPACA_PAPER_BASE_URL=https://paper-api.alpaca.markets
ALPACA_ORDER_NOTIONAL=10        # dollar notional for market orders (preferred)
ALPACA_TIME_IN_FORCE=gtc
ALPACA_ORDER_TYPE=market
ENABLE_ALPACA_REST=1           # enable REST fallback poller
ENABLE_ALPACA_IEX_REST=1
ENABLE_ALPACA_SIP_REST=0
ALPACA_REST_POLL_SECS=30
ENABLE_SYMBOL_DISCOVERY=1
SYMBOL_DISCOVERY_WINDOW_MIN=30
SYMBOL_DISCOVERY_MIN_MSG_RATE=0.2
SYMBOL_DISCOVERY_MIN_SENTI_ABS=0.1
SYMBOL_DISCOVERY_MAX_ADD=10
SYMBOL_DISCOVERY_SECS=60
ENABLE_UNIVERSE_SEED=1
ALPACA_REST_MAX_PER_CYCLE=50
PLANNER_MAX_TRADE_TICKERS=30

# Planner knobs
PLANNER_DEV_THRESH=0.0001
PLANNER_R_MULT=2.0
PLANNER_ATR_MINUTES=10
PLANNER_LIMIT_NOTIONAL=10
PLANNER_COOLDOWN_MINS=5
PLANNER_USE_SENTIMENT=1
PLANNER_USE_FUNDAMENTALS=1
POLICY_ALLOW_ALL_ALPACA=0
PLANNER_ENTRY_ATR_FRAC=0.1
PLANNER_BRACKET_PRICE_MAX=300
POLICY_MAX_SUBMITS_PER_STEP=8
PLANNER_TOP_K=15
PLANNER_Z_DEV_THRESH=1.8
ALPACA_ORDERS_PER_SEC=2
ALPACA_POS_PER_SEC=5

# Strategist (PLUTUS) service
ENABLE_STOCKTWITS_TRENDING=1
STRAT_RECO_SECS=120
STRAT_TUNE_SECS=300
STRAT_RECO_LOOKBACK_MIN=30
STRAT_RECO_TOPK=50
STRAT_TUNE_WINDOW_MIN=15
STRAT_KNOB_TTL_MIN=10
STRATEGIST_GPU=

# Execution quality / filters
MAX_SPREAD_BPS=8
MAX_QUOTE_AGE_SECS=5
ENTRY_SPREAD_FRAC=0.25
USE_VOL_TARGETED=1
RISK_DOLLARS_PER_TRADE=10
ENABLE_EARNINGS_BLACKOUT=1
EARNINGS_BLACKOUT_MIN=30
ENABLE_EXIT_MANAGER=1

# --- Rate limits (per second) ---
RATE_MAX_EVENTS_PER_SEC=500
RATE_MAX_HTTP_PER_SEC=5
ENABLE_FMP_FUNDAMENTALS=0
FMP_FUNDAMENTALS_PERIOD=annual
FMP_FUNDAMENTALS_SINCE=2005-01-01
FORECAST_URL_NBEATS=http://kronos-nbeats:8080
FORECAST_URL_GRAPH=http://kronos-graph:8081
KRONOS_NBEATS_MODEL_DIR=/models/kronos-nbeats/nbeats_XXXXX
KRONOS_NBEATS_API_KEY=changeme
KRONOS_NBEATS_AUTORELOAD=1
KRONOS_CALIBRATION_ENABLED=1
KRONOS_SCENARIOS_API_KEY=changeme
KRONOS_GRAPHX_API_KEY=changeme
KRONOS_TFT_API_KEY=changeme
TRADING_UNIVERSE_VIEW=trading_universe_100
ALLOW_EXIT_OUTSIDE_UNIVERSE=1
